{% load static %}
{% load user_details %}

<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


  <title>Team Mebers</title>
  <link href="{% static 'css/login.css' %}" rel="stylesheet">
  <link href="{% static 'css/history.css' %}" rel="stylesheet">

</head>

<body>
  <div class="container">
    <header class="row">
      <div class="col-md-8">
        <h1 class="header_title pt-3" style="margin-left: 150px;">SWITCHING TECH <span class="header_title1">SYSTEMS</span></h1>
      </div>
      <div class="col-md-4">
        <img class="logo-main" src="{% static 'images/ratnaglobal_logo.png' %}" />
      </div>
    </header>
    <div class="row">
      <div class="col-md-7 pt-3">
        <h1 class="quiz-history-title " style="float: left; margin-left: 150px;">Notifications</h1>
      </div>
      <div class="col-md-5 pt-3">
        <button onclick="goBack()" class="btn btn-primary" style="float: right; margin-right: 150px;">Go Back</button>
      </div>
    </div>
  </div>
  <div class="container-fluid mt-2">
    <div class="col-md-8 mx-auto quiz-history-container">
      {% if no_data %}
      <div class="quiz-history-card">
        <h5 class="card-title">Empty</h5>
      </div>
      {% else %}
      {% for notification in user_notification %}
      <div class="quiz-history-card">
        Manager: {{notification.assigned_to|fetch_user}} <br>Requesting to add <br> Employee: {{notification.mail|fetch_user}}

        <form method="POST" style="display: inline;">
          {% csrf_token %}
          <input hidden type="text" name="id_user" value='{{notification.user_id}}'>
          <button class="btn btn-primary" style="float: right; margin-right: 104px; margin-top: -39px">Approve</button>
        </form>
        <form method="POST" style="display: inline;">
          {% csrf_token %}
          <input hidden type="text" name="id_user" value='{{notification.user_id}}'>
          <input hidden type="text" name="cancel" value='cancel'>
          <button class="btn btn-primary" style="float: right; margin-right: 10px; margin-top: -39px">Cancel</button>
        </form>
      </div>
      {% endfor %}

      {% endif %}
    </div>
  </div>
  <script>
    function goBack() {
      // window.history.back();
      window.location.href = "{% url 'dashboard:dashboard' %}";
    }
  </script>

</body>

</html>