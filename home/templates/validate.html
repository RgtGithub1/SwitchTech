{% extends 'dependencies.html' %}
{% load static %}
{% block content %}

<!-- testing_otp_code -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RGT Validation</title>
    <link href="{% static 'css/login.css' %}" rel="stylesheet">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css"
        integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
    <!-- <script type="text/javascript">
        function preventBack() { window.history.forward(); }
        setTimeout("preventBack()", 0);
        window.onunload = function () { null };
    </script> -->

</head>

<body>
    <div class="container">
        <header class="row mb-4">
            <div class="col-md-8">
                <h1 class="header_title pt-3">SWITCHING TECH <span class="header_title1">SYSTEMS</span></h1>
            </div>
            <div class="col-md-4">
                <img class="logo-main" src="{% static 'images/ratnaglobal_logo.png' %}" />
            </div>
        </header>
        <div class="row">
            <div class="col-md-6">
                <div class="email_main_form">

                    <form method="POST" action="{% url 'validate' %}">

                        <p class="header_desc">
                        <h4>Please check your mail, you will recevie four digit OTP enter below to continue...</h4>
                        <h4>If not recevied please click here</h4>
                        </p>

                        {% csrf_token %}

                        <div class="form-group pt-5">

                            <!-- //its take automatically which your mentioned in login mail -->

                            <label for="fname">Employee mail:</label>

                            <input id="mail" type="text" name="mail" placeholder="RGT EMAIL ID" readonly
                                onkeydown="handleEnterKey(event)">

                        </div>

                        <!-- //here enter otp  -->

                        <div class="form-group">

                            <label for="fname">OTP:</label>

                            <input id="otp-input" type="text" name="otp" required oninput="hideErrorMessage()">

                        </div>

                        <!-- // it is dispaly a error message -->

                        <div id="error-message" class="error-message" style="color: red;">

                            {% if error_message %}

                            <p>{{ error_message }}</p>

                            {% endif %}

                        </div>




                        <!-- //if the user is click on keep signed option next onwards  -->

                        <div class="form-group">

                            <label for="keep-signed-in">

                                <input id="keep-signed-in pt-3" type="checkbox" name="remember_me">

                                Keep me signed in

                            </label>

                        </div>

                        <!-- // its valid otp -->

                        <input class="pt-3" type="submit" value="Validate OTP">

                    </form>

                    <script>

                        //hide the error message

                        function hideErrorMessage() {

                            var errorMessage = document.getElementById("error-message");

                            errorMessage.style.display = "none";

                        }




                        document.getElementById("mail").value = localStorage.getItem("email");

                    </script>

                </div>
            </div>
            <div class="col-md-6">
                <img class="img-thumbnail rounded logo" src="{% static 'images/loginimg.png' %}" width="100%" />
            </div>
        </div>
    </div>

    <script>

        function handleEnterKey(event) {

            if (event.keyCode === 13) {

                event.preventDefault(); // Prevent form submission




                // Get the index of the current input field

                var currentIndex = Array.from(document.querySelectorAll('input')).indexOf(event.target);




                // Find the next input field

                var inputs = document.querySelectorAll('input');

                var nextInput = inputs[currentIndex + 1];




                if (nextInput) {

                    nextInput.focus(); // Move focus to the next input field

                }

            }

        }

    </script>
</body>
</html>

{% endblock %}